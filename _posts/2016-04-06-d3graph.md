---
layout: post
tags: javascript d3.js visualization graph
category: code
---

<script src="https://d3js.org/d3.v3.min.js"></script>

<script src="https://rawgit.com/yihe2/d3graph/master/d3graph.js" type="text/javascript"></script>

<script src="https://rawgit.com/yihe2/d3graph/master/example/demo2.js" type="text/javascript"></script>
<div id="main"></div>
<script>
demo();
</script>

之前做图谱搜索，用d3.js做可视化，以图的方式展示后端数据，表现数据之间的关联。最近有时间就把画图这部分比较通用的东西抽象出来，写了一个[d3graph](https://github.com/yihe2/d3graph)。d3graph不仅能够画图，还能够以动画的形式展现出图的变化过程。

做图谱搜索的时候，由于有的节点会有非常多的子节点，如果全部画出来，就会非常乱，因此提供了交互的折叠/展开功能。但是折叠/展开之后图的布局会改变，直接重绘就会发生跳跃，很难看出哪些点是新增的。如果利用动画展示这个变化过程，就会比较清楚。

d3graph仅针对有向无环图（DAG），仅提供布局相关的功能：

1. 根据图的拓扑结构自动布局
2. 记录上次绘制的布局，通过动画，展示图的变化过程。

而具体如何可视化一个顶点或者一条边，由回调函数负责。

在以上demo中，随机生成了一个图，并且不停的增删顶点和边。d3graph会自动表现出变化的过程。
